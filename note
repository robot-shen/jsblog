# 博客实战记录
管理员：jinshen
pwd：jinshen123
## 环境配置
#### 安装virtualenv
参考链接：[windows下搭建virtualenv、virtualenvwrapper虚拟环境](https://blog.csdn.net/shaququ/article/details/54292043)
> python3 -m pip install virtualenv

#### 安装virtualenvwrapper
* 命令行安装
> python3 -m pip install virtualenvwrapper-win

* 设置WORK_HOME环境变量
> 在win环境变量里，新建一个变量：
变量名：WORK_HOME
变量值：C:\Py_Vir_Env（以后虚拟环境存放的路径）

![Alt text](https://imghosting-1256211031.cos.ap-beijing.myqcloud.com/note/jsblog01.png
 "不要设错了")

#### 检测及Django安装
* 进入cmd
> mkvirtualenv forblog
这样名为forblog的虚拟环境就建立好了
文件夹在C:\Py_Vir_Env

*  查看安装的所有虚拟环境
> workon

* 进入虚拟环境
> workon forblog

* 查看虚拟环境的pip包
> pip list

* 安装Django
> pip install django==1.10.6 -i https://pypi.tuna.tsinghua.edu.cn/simple

* 退出虚拟环境
> deactivate

## pycharm操作
1. 新建Django工程
2. 配置虚拟环境应用
3. 在Terminal里边验证是不是虚拟环境
>(forblog) D:\BaiduYunDownload\Learn\jsblog>
4. 把项目依赖文件放到工程目录
5. 安装依赖
> pip install -r requirements.txt

## 配置GitHub
为了防止使用git时给自己挖坑，建议初始化项目时：
1. 先建立远程仓库，然后clone到本地，再进行其他操作
2. 如果先建立本地仓库，后建立远程仓库，确保远程库为空，这样push的时候不会有冲突文件
3. 有了冲突文件，就要解决冲突。先把远程pull过来，然后合并解决冲突，再push

在default setting里边 >>> 版本控制 >>> Git
Path to Git:选择git.exe路径
SSH exeutable：选Native，其他默认即可
注意：选Native是应用本地git bash已经设置好的ssh
选built-in则是使用内建的ssh，这个内建是需要你输入name email，pycharm替你生成的

还是Native灵活性比较高，依赖git.exe的git软件都可以用

## 迁移数据库



* 最开始makemigrations时，有如下报错：

应该是Django没能识别出我引用的User模块导致

```
ERRORS:
blog.Article.author: (fields.E300) Field defines a relation with model 'User', which is either not installed, or is abstract.

blog.Article.author: (fields.E307) The field blog.Article.author was declared with a lazy reference to 'blog.user', but app 'blog' doesn't provide model 'user'.
```
* 知识点：关于Fornkey参数值on-delete

> [on-delete参数详解](https://blog.csdn.net/kuangshp128/article/details/78946316)

* 时区转换
> [链接](http://www.jb51.net/article/90802.htm)
在Django的配置文件settings.py中，有两个配置参数是跟时间与时区有关的，分别是TIME_ZONE和USE_TZ

USE_TZ = True，开启Django的时区功能
> [django时区相关](https://blog.csdn.net/w6299702/article/details/38782607)
建议是：后端处理的时候统一用UTC时间，忽略本地时间的存在
模板处理时会自动使用settings.TIME_ZONE帮我们转换
其他需要转换的场合，也可以自行处理（如引用pytz模块）













